<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="../stylesheets/settingsStyles.css" />
    <script>
      // Assigning the JSON object without quotes
      let user = <%- JSON.stringify(user) %>;
    </script>

    <script src="../javascripts/settingsScript.js" defer></script>
  </head>

  <body>
    <div id="miniAlert" class="alert" style="display: none">
      <span id="alertMessage"></span>
    </div>
    <div class="main-wrapper">
      <div class="nav">
        <button onclick="window.location.href='/'" class="toBeDisabled">
          <div class="logoBox">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 -960 960 960"
              fill="#e8eaed"
              class="logoImg"
            >
              <path
                d="M280-280v-80h400v80H280ZM120-440v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80ZM120-600v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Z"
              />
            </svg>
            <h1 class="logo"><span>Flash</span>Typer</h1>
          </div>
        </button>

        <div class="navElements">
          <% if (user.userName){ %>
          <button
            onclick="window.location.href='/profile'"
            id="userProfile"
            class="toBeDisabled"
          >
            Profile
          </button>
          <button
            onclick="window.location.href='/logout'"
            id="logout"
            class="toBeDisabled"
          >
            Logout
          </button>
          <% } else { %>
          <button
            onclick="window.location.href='/login'"
            id="login"
            class="toBeDisabled"
          >
            Login
          </button>
          <% } %>
          <button
            onclick="window.location.href='/contact-us'"
            class="toBeDisabled"
          >
            Contact Us
          </button>
          <button
            onclick="window.location.href='/settings'"
            class="toBeDisabled"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="30px"
              width="25px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e8eaed"
              id="settings"
            >
              <path
                d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"
              />
            </svg>
          </button>
        </div>
      </div>
      <div class="wrapper">
        <ul class="sidebar-nav">
          <li class="sidebar-item">
            <a href="#" class="sidebar-link active">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="30px"
                width="30px"
                viewBox="0 -960 960 960"
                fill="#e8eaed"
              >
                <path
                  d="M120-120v-190l358-358-58-56 58-56 76 76 124-124q5-5 12.5-8t15.5-3q8 0 15 3t13 8l94 94q5 6 8 13t3 15q0 8-3 15.5t-8 12.5L705-555l76 78-57 57-56-58-358 358H120Zm80-80h78l332-334-76-76-334 332v78Zm447-410 96-96-37-37-96 96 37 37Zm0 0-37-37 37 37Z"
                />
              </svg>
              <span>Preferences</span>
            </a>
          </li>
          <% if (user.userName){ %>

          <li class="sidebar-item">
            <a
              href="#"
              class="sidebar-link <%= user.userName ? '' : 'active' %>"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="30px"
                width="30px"
                viewBox="0 -960 960 960"
                fill="#e8eaed"
              >
                <path
                  d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z"
                />
              </svg>
              <span>Account</span>
            </a>
          </li>
          <% } %>
        </ul>

        <div class="main">
          <!-- MAIN PAGES -->

          <div id="appearance" class="menu">
            <div class="card">
              <h1 class="m-3" class="heading">Preferences</h1>
              <div class="preferences">
                <div class="preferences1">
                  <ul class="list-group">
                    <li class="list-group-item my-2">
                      <h3>Font Size</h3>
                      <div class="btn-group">
                        <select
                          id="fontSize"
                          class="form-select"
                          aria-label="Font Size"
                        >
                          <option value="2">Medium (Default)</option>
                          <option value="1">Small</option>
                          <option value="3">Large</option>
                        </select>
                      </div>
                    </li>
                    <li class="list-group-item my-2">
                      <h3>Font Family</h3>
                      <div class="btn-group">
                        <select
                          id="fontFamily"
                          class="form-select"
                          aria-label="Font Family"
                        >
                          <option value="1">Roboto (Default)</option>
                          <option value="2">Fancy</option>
                          <option value="3">Capped</option>
                          <option value="4">Bold Art</option>
                          <option value="5">Tallsive</option>
                          <option value="6">Clean Bold</option>
                          <option value="7">Typewriter</option>
                          <option value="8">Classic</option>
                        </select>
                      </div>
                    </li>
                    <li class="list-group-item my-2">
                      <h3>Theme</h3>
                      <div class="btn-group">
                        <select
                          id="theme"
                          class="form-select"
                          aria-label="Theme"
                        >
                          <option value="1">Midnight Blue</option>
                          <option value="2">Panda</option>
                          <option value="3">Hacker's Matrix</option>
                          <option value="4">Incognito</option>
                          <option value="5">Paper</option>
                          <option value="6">Crimson's Blush</option>
                        </select>
                      </div>
                    </li>
                  </ul>
                </div>
                <div class="preferences2">
                  <div class="form-check form-switch mx-5 my-2">
                    <label class="form-check-label" for="tabRestart">
                      <h3>Hit Tab to Restart</h3>
                    </label>
                    <input
                      class="form-check-input h4"
                      type="checkbox"
                      id="tabRestart"
                    />
                  </div>
                  <div class="form-check form-switch mx-5 my-2">
                    <label class="form-check-label" for="proMode">
                      <h3>Pro Mode (No Backspace)</h3>
                    </label>
                    <input
                      class="form-check-input h4"
                      type="checkbox"
                      id="proMode"
                    />
                  </div>
                  <div class="form-check form-switch mx-5 my-2">
                    <label class="form-check-label" for="keyHitSound">
                      <h3>KeyHit Sound</h3>
                    </label>
                    <input
                      class="form-check-input h4"
                      type="checkbox"
                      id="keyHitSound"
                    />
                  </div>
                </div>
              </div>
              <div>
                <button class="myBtn" id="save">Save</button>
              </div>
            </div>
          </div>
          <% if (user.userName){ %>
          <div id="account" style="display: none" class="menu">
            <div class="card mb-4">
              <h1 class="m-3">Edit Account Info</h1>
              <div class="card-body">
                <div class="line">
                  <div class="col-sm-5">
                    <p class="mb-0">Name</p>
                  </div>
                  <div class="col-sm-5">
                    <input
                      readonly
                      type="text"
                      id="name"
                      value="<%=user.name%>"
                      autocomplete="off"
                      class="editInput"
                    />
                  </div>
                  <a href="#">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      height="24px"
                      viewBox="0 -960 960 960"
                      width="24px"
                      fill="#e8eaed"
                      class="editIcon"
                    >
                      <path
                        d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"
                      />
                    </svg>
                  </a>
                </div>
                <hr />
                <div class="line">
                  <div class="col-sm-5">
                    <p class="mb-0">Email</p>
                  </div>
                  <div class="col-sm-5">
                    <input
                      type="text"
                      id="email"
                      class="editInput"
                      value="<%=user.userEmail%>"
                      readonly
                      autocomplete="off"
                    />
                  </div>
                  <a href="#">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      height="24px"
                      viewBox="0 -960 960 960"
                      width="24px"
                      fill="#e8eaed"
                      class="editIcon"
                    >
                      <path
                        d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"
                      />
                    </svg>
                  </a>
                </div>
                <hr />
                <div class="line">
                  <div class="col-sm-5">
                    <p class="mb-0">Password</p>
                  </div>
                  <div class="col-sm-5">
                    <form action="">
                      <input
                        class="editInput"
                        readonly
                        id="password"
                        type="password"
                        value="<%=user.password%>"
                        autocomplete="off"
                      />
                    </form>
                  </div>
                  <a href="#">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      height="24px"
                      viewBox="0 -960 960 960"
                      width="24px"
                      fill="#e8eaed"
                      class="editIcon"
                    >
                      <path
                        d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"
                      />
                    </svg>
                  </a>
                </div>
                <div class="my-4" id="errorMessages"></div>
                <div>
                  <button type="button" id="saveInfo" class="myBtn">
                    Save Info
                  </button>
                  <button type="button" id="deleteAccountBtn">
                    Delete my Account
                  </button>
                </div>
                <div
                  id="deleteAccountModal"
                  class="modal"
                  style="display: none"
                >
                  <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Confirm Account Deletion</h2>
                    <p>
                      Please enter your password to confirm account deletion.
                    </p>

                    <p>(This action can't be undone)</p>
                    <form id="confirmDeletionForm">
                      <input
                        type="password"
                        name="password"
                        placeholder="Password"
                        required
                        id="delPass"
                        autocomplete="off"
                      />
                      <button type="submit" id="confirm-btn">I Confirm</button>

                      <div
                        id="error-message"
                        class="error"
                        style="display: none"
                      ></div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <% } %>
        </div>
      </div>
    </div>
  </body>
</html>
