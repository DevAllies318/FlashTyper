<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Signup Page</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto|Charm|Cinzel|Spicy Rice|Cormorant Upright|Amita|Special Elite|Cutive Mono"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <style>
      * {
        color: var(--flashLogo);
        margin: 0;
        padding: 0;
        outline: none;
        box-sizing: border-box;
      }

      body {
        background-color: var(--mainBackground);
      }
      .main-wrapper {
        display: flex;
        flex-direction: column;
        /* max-width: 110rem;
        margin: auto; */
      }
      a {
        text-decoration: none;
      }
      .logoBox {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      span,
      .logo {
        color: var(--flashLogo);
        cursor: pointer;
      }
      .logoImg {
        width: 60px;
        height: 60px;
        fill: var(--flashLogo);
      }
      .nav {
        display: flex;
        justify-content: space-between;
        padding: 30px;
        align-items: center;
      }

      .navElements {
        display: flex;
        gap: 15px;
        align-items: center;
      }
      form {
        text-align: center;
      }
      button {
        border: none;
        outline: none;
        background-color: transparent;
        color: var(--buttonTxt);
        font-size: 1.2rem;
        padding: 10px;
        border-radius: 10px;
        cursor: pointer;
        margin-bottom: 8px;
        font-weight: bold;
        transition: color 0.3s, color 0.3s;
      }
      button:hover {
        color: var(--buttonHover);
      }
      h3 {
        cursor: default;
      }
      .signup-container {
        width: 50%;
        align-self: center;
      }

      input {
        width: 100%;
        padding: 10px;
        margin: 3px 0;
        border: none;
        border-bottom: 1px solid var(--flashLogo);
        background-color: var(--mainBackground);
        color: var(--buttonTxt);
        font-weight: bold;
        box-sizing: border-box;
        font-size: 1.2rem;
        outline: none;
      }
      input::placeholder {
        color: var(--buttonTxt);
      }

      input[type="email"] {
        border-bottom: none;
      }

      .gender-input {
        color: var(--buttonTxt);
        box-sizing: border-box;
        font-size: 1.2rem;
        display: flex;
        gap: 20px;
        align-items: center;
        justify-content: space-between;
      }

      .gender-input label {
        color: var(--buttonTxt);
        font-size: 1.1rem;
        font-weight: bold;
      }

      .gender-options {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      .emailAndGender {
        display: flex;
        justify-content: flex-start;
        border-bottom: 1px solid var(--flashLogo);
      }

      .gender-options input[type="radio"] {
        margin-right: 10px;
      }

      .gender-options label {
        font-weight: bold;
        color: var(--buttonTxt);
      }
      svg {
        fill: var(--buttonTxt);
        transition: all ease 0.3s;
      }
      #settings:hover {
        fill: var(--buttonHover);
      }
      input[type="submit"] {
        width: fit-content;
        margin: 10px 0;
        border-bottom: 2px solid var(--buttonTxt);
        background-color: transparent;
        color: var(--buttonTxt);
        font-weight: bold;
        font-size: 1.2rem;
        cursor: pointer;
        padding: 3px 0;
        align-self: center;
        transition: 0.3s;
      }
      input[type="submit"]:hover {
        color: var(--buttonHover);
        border-bottom: 2px solid var(--flashLogo);
      }

      .message {
        text-align: center;
        margin-top: 10px;
        font-size: 1.1rem;
        color: var(--buttonHover);
      }
      .message a {
        color: var(--buttonTxt);
        text-decoration: none;
        font-weight: bold;
        transition: all ease 0.3s;
      }
      .message a:hover {
        color: var(--buttonHover);
        text-decoration: none;
      }
      .error-message {
        color: var(--wordsTxt);
        margin-top: 5px;
      }
      .passwordsDiv {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <div class="main-wrapper">
      <div class="nav">
        <button onclick="window.location.href='/'" class="toBeDisabled">
          <div class="logoBox">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 -960 960 960"
              fill="#e8eaed"
              class="logoImg"
            >
              <path
                d="M280-280v-80h400v80H280ZM120-440v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80ZM120-600v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Zm160 0v-80h80v80h-80Z"
              />
            </svg>
            <h1 class="logo"><span>Flash</span>Typer</h1>
          </div>
        </button>

        <div class="navElements">
          <% if (user){ %>
          <button
            onclick="window.location.href='/profile'"
            id="userProfile"
            class="toBeDisabled"
          >
            Profile
          </button>
          <button
            onclick="window.location.href='/logout'"
            id="logOut"
            class="toBeDisabled"
          >
            Logout
          </button>
          <% } else { %>
          <button
            onclick="window.location.href='/login'"
            id="login"
            class="toBeDisabled"
          >
            Login
          </button>
          <% } %>
          <button
            onclick="window.location.href='/contact-us'"
            class="toBeDisabled"
          >
            Contact Us
          </button>
          <button
            onclick="window.location.href='/settings'"
            class="toBeDisabled"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="30px"
              width="25px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#e8eaed"
              id="settings"
            >
              <path
                d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"
              />
            </svg>
          </button>
        </div>
      </div>

      <div class="signup-container">
        <h2>Create Account in FlashTyper</h2>
        <% if (typeof error !== 'undefined' && error !== null) { %>
        <div class="error-message"><%= error %></div>
        <% } %>
        <form action="/signUp" method="post" onsubmit="return validateForm()">
          <input
            type="text"
            name="name"
            placeholder="Name"
            required
            id="signUpName"
            autocomplete="off"
          />
          <input
            type="text"
            name="userName"
            placeholder="Username"
            required
            autocomplete="off"
          />
          <div class="emailAndGender">
            <div style="width: 55%">
              <input
                type="email"
                name="userEmail"
                placeholder="Email"
                required
                autocomplete="off"
              />
            </div>
            <div class="gender-input">
              <label for="gender">Gender:</label>
              <div class="gender-options">
                <div style="margin: -3px 0px; display: flex">
                  <input
                    type="radio"
                    id="male"
                    name="userGender"
                    value="male"
                    required
                  />
                  <label for="male">Male</label>
                </div>
                <div style="margin: -3px 0px; display: flex">
                  <input
                    type="radio"
                    id="female"
                    name="userGender"
                    value="female"
                    required
                  />
                  <label for="female">Female</label>
                </div>
              </div>
            </div>
          </div>

          <div class="passwordsDiv">
            <div style="width: 125%">
              <input
                type="password"
                name="password"
                placeholder="Password"
                id="password"
                required
                autocomplete="off"
              />
            </div>
            <input
              type="password"
              name="confirm_password"
              placeholder="Re-enter Password"
              id="confirm_password"
              required
              autocomplete="off"
            />
          </div>
          <input type="submit" value="Signup" />
        </form>
        <div class="message">
          Already have an account? <a href="/login">Log In</a>
        </div>
      </div>
    </div>
    <script>
      const savedPreferences = localStorage.getItem("preferences");
      const preferences = JSON.parse(savedPreferences);

      const themes = {
        1: {
          "--flashLogo": "rgb(180, 244, 250)",
          "--mainBackground": "#030613",
          "--wordsTxt": "#4fcdb9",
          "--buttonTxt": "#3a6c97",
          "--buttonHover": "#fff",
        },
        2: {
          "--flashLogo": "#ffffff",
          "--mainBackground": "#000000",
          "--wordsTxt": "#d0d0d0",
          "--buttonTxt": "#ffffff",
          "--buttonHover": "#737373",
        },
        3: {
          "--flashLogo": "#d1ffcd",
          "--mainBackground": "#000000",
          "--wordsTxt": "#15ff00",
          "--buttonTxt": "#006500",
          "--buttonHover": "#d1ffcd",
        },
        4: {
          "--flashLogo": "#ffffff",
          "--mainBackground": "#0e0e0e",
          "--wordsTxt": "#db9730",
          "--buttonTxt": "#555555",
          "--buttonHover": "#c6c6c6",
        },
        5: {
          "--flashLogo": "#444444",
          "--mainBackground": "#ffffff",
          "--wordsTxt": "#444444",
          "--buttonTxt": "#898787",
          "--buttonHover": "#444444",
        },
        6: {
          "--flashLogo": "#ffa7a7",
          "--mainBackground": "#240000",
          "--wordsTxt": "#ea514b",
          "--buttonTxt": "#f36f6f",
          "--buttonHover": "#ffffff",
        },
      };
      let theme = preferences.theme;
      const selectedTheme = themes[theme];
      const root = document.documentElement;
      for (const [property, value] of Object.entries(selectedTheme)) {
        root.style.setProperty(property, value);
      }
      document.getElementById("signUpName").focus();

      function validateForm() {
        let password = document.getElementById("password").value;
        let confirm_password =
          document.getElementById("confirm_password").value;

        // Check if password length is at least 8 characters
        if (password.length < 8) {
          alert("Password must be at least 8 characters long");
          return false;
        }

        // Check if both passwords match
        if (password !== confirm_password) {
          alert("Passwords do not match");
          return false;
        }
        return true; // Form will be submitted if all validations pass
      }
    </script>
  </body>
</html>
